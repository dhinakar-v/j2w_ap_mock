<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Loan Underwriting Agent Dashboard</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          Oxygen, Ubuntu, Cantarell, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
        background: white;
        border-radius: 16px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        overflow: hidden;
      }

      .header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 30px;
        text-align: center;
      }

      .header h1 {
        font-size: 32px;
        margin-bottom: 10px;
      }

      .header p {
        opacity: 0.9;
        font-size: 16px;
      }

      .tabs {
        display: flex;
        background: #f7f9fc;
        border-bottom: 2px solid #e1e8ed;
      }

      .tab {
        flex: 1;
        padding: 20px;
        text-align: center;
        cursor: pointer;
        font-weight: 600;
        color: #64748b;
        transition: all 0.3s;
        border-bottom: 3px solid transparent;
      }

      .tab:hover {
        background: #eef2f7;
      }

      .tab.active {
        color: #667eea;
        background: white;
        border-bottom-color: #667eea;
      }

      .tab-content {
        display: none;
        padding: 40px;
        min-height: 600px;
      }

      .tab-content.active {
        display: block;
      }

      /* Dashboard Tab */
      .dashboard-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 24px;
        margin-bottom: 40px;
      }

      .stat-card {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        padding: 30px;
        border-radius: 12px;
        color: white;
      }

      .stat-card h3 {
        font-size: 14px;
        opacity: 0.9;
        margin-bottom: 10px;
      }

      .stat-card .number {
        font-size: 36px;
        font-weight: bold;
        margin-bottom: 5px;
      }

      .create-agent-btn {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 20px 40px;
        border: none;
        border-radius: 8px;
        font-size: 18px;
        font-weight: 600;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        gap: 10px;
        transition: transform 0.2s;
      }

      .create-agent-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
      }

      .agents-list {
        margin-top: 40px;
      }

      .agents-list h2 {
        margin-bottom: 20px;
        color: #1e293b;
      }

      .agent-card {
        background: #f7f9fc;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 15px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .agent-card h3 {
        color: #1e293b;
        margin-bottom: 5px;
      }

      .agent-card p {
        color: #64748b;
        font-size: 14px;
      }

      .agent-card button {
        background: #667eea;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 6px;
        cursor: pointer;
      }

      /* Create Agent Tab */
      .form-group {
        margin-bottom: 25px;
      }

      .form-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: #1e293b;
      }

      .form-group input,
      .form-group textarea {
        width: 100%;
        padding: 12px;
        border: 2px solid #e1e8ed;
        border-radius: 8px;
        font-size: 14px;
        transition: border-color 0.3s;
      }

      .form-group input:focus,
      .form-group textarea:focus {
        outline: none;
        border-color: #667eea;
      }

      .form-group textarea {
        resize: vertical;
        min-height: 100px;
      }

      .upload-area {
        border: 2px dashed #cbd5e1;
        border-radius: 8px;
        padding: 40px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s;
      }

      .upload-area:hover {
        border-color: #667eea;
        background: #f7f9fc;
      }

      .upload-area.dragover {
        border-color: #667eea;
        background: #eef2f7;
      }

      .uploaded-files {
        margin-top: 15px;
      }

      .file-item {
        background: #f7f9fc;
        padding: 10px 15px;
        border-radius: 6px;
        margin-bottom: 8px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .file-item button {
        background: #ef4444;
        color: white;
        border: none;
        padding: 5px 10px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 12px;
      }

      /* Extraction Interface Tab */
      .extraction-layout {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
        height: 700px;
      }

      .editor-panel {
        display: flex;
        flex-direction: column;
      }

      .editor-panel h2 {
        margin-bottom: 20px;
        color: #1e293b;
      }

      .extraction-field {
        background: #f7f9fc;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 15px;
        border-left: 4px solid #667eea;
      }

      .extraction-field h3 {
        font-size: 14px;
        color: #64748b;
        margin-bottom: 10px;
      }

      .extraction-value {
        font-size: 18px;
        font-weight: 600;
        color: #1e293b;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .status-badge {
        font-size: 12px;
        padding: 4px 12px;
        border-radius: 12px;
        font-weight: 600;
      }

      .status-badge.success {
        background: #dcfce7;
        color: #16a34a;
      }

      .status-badge.warning {
        background: #fef3c7;
        color: #d97706;
      }

      .status-badge.error {
        background: #fee2e2;
        color: #dc2626;
      }

      .pdf-panel {
        background: #f7f9fc;
        border-radius: 8px;
        padding: 20px;
        overflow: hidden;
        display: flex;
        flex-direction: column;
      }

      .pdf-controls {
        display: flex;
        gap: 10px;
        margin-bottom: 15px;
      }

      .pdf-controls select {
        flex: 1;
        padding: 10px;
        border: 2px solid #e1e8ed;
        border-radius: 6px;
      }

      .pdf-viewer {
        flex: 1;
        background: white;
        border-radius: 8px;
        overflow: auto;
      }

      .pdf-viewer iframe {
        width: 100%;
        height: 100%;
        border: none;
      }

      .generate-report-btn {
        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        color: white;
        padding: 15px 30px;
        border: none;
        border-radius: 8px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        margin-top: 20px;
        transition: transform 0.2s;
      }

      .generate-report-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 20px rgba(16, 185, 129, 0.3);
      }

      .report-section {
        background: white;
        border: 2px solid #e1e8ed;
        border-radius: 8px;
        padding: 30px;
        margin-top: 20px;
        display: none;
      }

      .report-section.active {
        display: block;
      }

      .report-section h2 {
        color: #1e293b;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 2px solid #e1e8ed;
      }

      .report-item {
        margin-bottom: 15px;
        padding: 15px;
        background: #f7f9fc;
        border-radius: 6px;
      }

      .report-item strong {
        color: #1e293b;
        display: block;
        margin-bottom: 5px;
      }

      .loading {
        text-align: center;
        padding: 40px;
      }

      .spinner {
        border: 4px solid #f3f4f6;
        border-top: 4px solid #667eea;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
        margin: 0 auto 20px;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      /* Report Tab Styles */
      .report-header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 30px;
        border-radius: 12px;
        margin-bottom: 30px;
      }

      .report-header h2 {
        font-size: 28px;
        margin-bottom: 10px;
      }

      .report-header .applicant-info {
        opacity: 0.9;
        font-size: 14px;
      }

      .report-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .report-card {
        background: white;
        border: 2px solid #e1e8ed;
        border-radius: 12px;
        padding: 25px;
        transition: transform 0.2s, box-shadow 0.2s;
      }

      .report-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
      }

      .report-card h3 {
        color: #64748b;
        font-size: 14px;
        margin-bottom: 15px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .report-card .value {
        font-size: 32px;
        font-weight: bold;
        color: #1e293b;
        margin-bottom: 10px;
      }

      .report-card .description {
        color: #64748b;
        font-size: 14px;
        line-height: 1.5;
      }

      .risk-indicator {
        display: inline-block;
        padding: 8px 20px;
        border-radius: 20px;
        font-weight: 600;
        font-size: 16px;
      }

      .risk-low {
        background: #dcfce7;
        color: #16a34a;
      }

      .risk-medium {
        background: #fef3c7;
        color: #d97706;
      }

      .risk-high {
        background: #fee2e2;
        color: #dc2626;
      }

      .detailed-section {
        background: white;
        border: 2px solid #e1e8ed;
        border-radius: 12px;
        padding: 30px;
        margin-bottom: 20px;
      }

      .detailed-section h3 {
        color: #1e293b;
        font-size: 20px;
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 2px solid #e1e8ed;
      }

      .analysis-item {
        display: flex;
        justify-content: space-between;
        padding: 15px;
        background: #f7f9fc;
        border-radius: 8px;
        margin-bottom: 12px;
      }

      .analysis-item .label {
        color: #64748b;
        font-weight: 600;
      }

      .analysis-item .data {
        color: #1e293b;
        font-weight: 600;
      }

      .progress-bar {
        width: 100%;
        height: 30px;
        background: #e1e8ed;
        border-radius: 15px;
        overflow: hidden;
        margin: 10px 0;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
        display: flex;
        align-items: center;
        justify-content: flex-end;
        padding-right: 15px;
        color: white;
        font-weight: 600;
        font-size: 14px;
        transition: width 1s ease;
      }

      .recommendation-box {
        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        color: white;
        padding: 30px;
        border-radius: 12px;
        margin-top: 30px;
      }

      .recommendation-box h3 {
        font-size: 24px;
        margin-bottom: 15px;
      }

      .recommendation-box p {
        line-height: 1.8;
        opacity: 0.95;
      }

      .warning-box {
        background: #fef3c7;
        border-left: 4px solid #d97706;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
      }

      .warning-box h4 {
        color: #d97706;
        margin-bottom: 10px;
      }

      .checklist {
        list-style: none;
        padding: 0;
      }

      .checklist li {
        padding: 12px 0;
        border-bottom: 1px solid #e1e8ed;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .checklist li:last-child {
        border-bottom: none;
      }

      .check-icon {
        color: #16a34a;
        font-weight: bold;
        font-size: 18px;
      }

      .chart-container {
        margin: 20px 0;
        padding: 20px;
        background: #f7f9fc;
        border-radius: 8px;
      }

      .bar-chart {
        display: flex;
        align-items: flex-end;
        justify-content: space-around;
        height: 200px;
        gap: 20px;
      }

      .bar {
        flex: 1;
        background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);
        border-radius: 8px 8px 0 0;
        display: flex;
        flex-direction: column;
        justify-content: flex-end;
        align-items: center;
        color: white;
        font-weight: bold;
        padding: 10px;
        transition: all 0.3s;
      }

      .bar:hover {
        opacity: 0.8;
        transform: scale(1.05);
      }

      .bar-label {
        text-align: center;
        margin-top: 10px;
        color: #64748b;
        font-size: 12px;
        font-weight: 600;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>üè¶ Loan Underwriting Agent</h1>
        <p>AI-Powered Document Analysis & Risk Assessment</p>
      </div>

      <div class="tabs">
        <div class="tab active" onclick="switchTab(0)">Dashboard</div>
        <div class="tab" onclick="switchTab(1)">Create Agent</div>
        <div class="tab" onclick="switchTab(2)">Extraction Interface</div>
        <div class="tab" onclick="switchTab(3)">Report</div>
      </div>

      <!-- Tab 1: Dashboard -->
      <div class="tab-content active">
        <div class="dashboard-grid">
          <div class="stat-card">
            <h3>Total Agents</h3>
            <div class="number">3</div>
            <p>Active underwriting agents</p>
          </div>
          <div class="stat-card">
            <h3>Documents Processed</h3>
            <div class="number">127</div>
            <p>This month</p>
          </div>
          <div class="stat-card">
            <h3>Avg. Processing Time</h3>
            <div class="number">2.3s</div>
            <p>Per document</p>
          </div>
        </div>

        <button class="create-agent-btn" onclick="switchTab(1)">
          <span>‚ûï</span> Create New Agent
        </button>

        <div class="agents-list">
          <h2>Your Agents</h2>
          <div class="agent-card">
            <div>
              <h3>Mortgage Underwriter Pro</h3>
              <p>Analyzes mortgage applications and credit reports</p>
            </div>
            <button onclick="switchTab(2)">Open</button>
          </div>
          <div class="agent-card">
            <div>
              <h3>Personal Loan Analyzer</h3>
              <p>Evaluates personal loan applications</p>
            </div>
            <button onclick="switchTab(2)">Open</button>
          </div>
          <div class="agent-card">
            <div>
              <h3>Small Business Credit Agent</h3>
              <p>Assesses small business loan applications</p>
            </div>
            <button onclick="switchTab(2)">Open</button>
          </div>
        </div>
      </div>

      <!-- Tab 2: Create Agent -->
      <div class="tab-content">
        <h2 style="margin-bottom: 30px; color: #1e293b">
          Create New Underwriting Agent
        </h2>

        <div class="form-group">
          <label>Agent Name</label>
          <input
            type="text"
            id="agentName"
            placeholder="e.g., Mortgage Underwriter Pro"
          />
        </div>

        <div class="form-group">
          <label>Agent Description</label>
          <textarea
            id="agentDescription"
            placeholder="Describe what this agent will analyze and its purpose..."
          ></textarea>
        </div>

        <div class="form-group">
          <label>Upload Related Documents</label>
          <div
            class="upload-area"
            id="uploadArea"
            onclick="document.getElementById('fileInput').click()"
          >
            <p style="color: #64748b; margin-bottom: 10px">
              üìÑ Drop files here or click to upload
            </p>
            <p style="color: #94a3b8; font-size: 14px">
              Support: PDF, Bank Statements, Credit Reports, Loan Applications
            </p>
          </div>
          <input
            type="file"
            id="fileInput"
            multiple
            accept=".pdf"
            style="display: none"
          />
          <div class="uploaded-files" id="uploadedFiles"></div>
        </div>

        <button class="create-agent-btn" onclick="createAgent()">
          Create Agent
        </button>
      </div>

      <!-- Tab 3: Extraction Interface -->
      <div class="tab-content">
        <div class="extraction-layout">
          <div class="editor-panel">
            <h2>Extracted Data</h2>

            <div class="extraction-field">
              <h3>Annual Income</h3>
              <div class="extraction-value">
                $125,000
                <span class="status-badge success">Verified</span>
              </div>
            </div>

            <div class="extraction-field">
              <h3>Credit Score</h3>
              <div class="extraction-value">
                742
                <span class="status-badge success">Above 700</span>
              </div>
            </div>

            <div class="extraction-field">
              <h3>Income Match Status</h3>
              <div class="extraction-value">
                Bank Statement ‚Üî Application
                <span class="status-badge success">Matched</span>
              </div>
            </div>

            <div class="extraction-field">
              <h3>Application Complete</h3>
              <div class="extraction-value">
                All Required Fields
                <span class="status-badge success">Complete</span>
              </div>
            </div>

            <div class="extraction-field">
              <h3>Discrepancies Found</h3>
              <div class="extraction-value">
                None
                <span class="status-badge success">Clear</span>
              </div>
            </div>

            <button class="generate-report-btn" onclick="generateReport()">
              Generate Underwriting Report
            </button>

            <div class="report-section" id="reportSection">
              <h2>üìã Underwriting Report</h2>
              <div class="report-item">
                <strong>Applicant Risk Level:</strong>
                <span style="color: #16a34a; font-size: 18px">LOW RISK</span>
              </div>
              <div class="report-item">
                <strong>Recommendation:</strong>
                APPROVE - Applicant meets all lending criteria with strong
                financial indicators
              </div>
              <div class="report-item">
                <strong>Key Findings:</strong>
                ‚Ä¢ Annual income verified at $125,000<br />
                ‚Ä¢ Excellent credit score (742)<br />
                ‚Ä¢ Income consistency across all documents<br />
                ‚Ä¢ Complete application with no missing information<br />
                ‚Ä¢ No discrepancies detected in financial documents
              </div>
              <div class="report-item">
                <strong>Debt-to-Income Ratio:</strong>
                28% (Excellent)
              </div>
              <div class="report-item">
                <strong>Employment Verification:</strong>
                Confirmed - 5 years with current employer
              </div>
              <div class="report-item">
                <strong>Assets:</strong>
                $85,000 in savings, $240,000 in retirement accounts
              </div>
            </div>
          </div>

          <div class="pdf-panel">
            <h2 style="margin-bottom: 15px; color: #1e293b">Document Viewer</h2>
            <div class="pdf-controls">
              <select id="documentSelector" onchange="changeDocument()">
                <option value="bank">Bank Statement</option>
                <option value="credit">Credit Report</option>
                <option value="application">Loan Application</option>
              </select>
            </div>
            <div class="pdf-viewer">
              <iframe
                id="pdfViewer"
                src="https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf"
              ></iframe>
            </div>
          </div>
        </div>
      </div>

      <!-- Tab 4: Report -->
      <div class="tab-content">
        <div class="report-header">
          <h2>üìä Comprehensive Underwriting Analysis</h2>
          <div class="applicant-info">
            Applicant: John Smith ‚Ä¢ Application ID: UW-2024-00127 ‚Ä¢ Date:
            November 5, 2025
          </div>
        </div>

        <div class="report-grid">
          <div class="report-card">
            <h3>Risk Assessment</h3>
            <div class="value">
              <span class="risk-indicator risk-low">LOW RISK</span>
            </div>
            <div class="description">
              Applicant demonstrates excellent creditworthiness with minimal
              default probability
            </div>
          </div>

          <div class="report-card">
            <h3>Credit Score</h3>
            <div class="value">742</div>
            <div class="description">
              Excellent credit standing. Score exceeds minimum requirement by 42
              points
            </div>
          </div>

          <div class="report-card">
            <h3>Annual Income</h3>
            <div class="value">$125,000</div>
            <div class="description">
              Verified through bank statements and employment documentation
            </div>
          </div>

          <div class="report-card">
            <h3>Debt-to-Income Ratio</h3>
            <div class="value">28%</div>
            <div class="description">
              Excellent ratio. Well below the 43% threshold for qualified
              mortgages
            </div>
          </div>
        </div>

        <div class="detailed-section">
          <h3>üí∞ Financial Profile Analysis</h3>

          <div class="analysis-item">
            <span class="label">Monthly Gross Income:</span>
            <span class="data">$10,417</span>
          </div>
          <div class="analysis-item">
            <span class="label">Total Monthly Debt Payments:</span>
            <span class="data">$2,917</span>
          </div>
          <div class="analysis-item">
            <span class="label">Available Monthly Income:</span>
            <span class="data">$7,500</span>
          </div>
          <div class="analysis-item">
            <span class="label">Liquid Assets:</span>
            <span class="data">$85,000</span>
          </div>
          <div class="analysis-item">
            <span class="label">Total Assets:</span>
            <span class="data">$325,000</span>
          </div>
          <div class="analysis-item">
            <span class="label">Employment Duration:</span>
            <span class="data">5 Years (Current Employer)</span>
          </div>
        </div>

        <div class="detailed-section">
          <h3>üìà Credit Analysis</h3>

          <div style="margin: 20px 0">
            <div
              style="
                display: flex;
                justify-content: space-between;
                margin-bottom: 5px;
              "
            >
              <span style="color: #64748b; font-weight: 600"
                >Payment History</span
              >
              <span style="color: #1e293b; font-weight: 600">100%</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill" style="width: 100%">Excellent</div>
            </div>
          </div>

          <div style="margin: 20px 0">
            <div
              style="
                display: flex;
                justify-content: space-between;
                margin-bottom: 5px;
              "
            >
              <span style="color: #64748b; font-weight: 600"
                >Credit Utilization</span
              >
              <span style="color: #1e293b; font-weight: 600">22%</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill" style="width: 22%">Optimal</div>
            </div>
          </div>

          <div style="margin: 20px 0">
            <div
              style="
                display: flex;
                justify-content: space-between;
                margin-bottom: 5px;
              "
            >
              <span style="color: #64748b; font-weight: 600"
                >Credit History Length</span
              >
              <span style="color: #1e293b; font-weight: 600">12 Years</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill" style="width: 85%">Strong</div>
            </div>
          </div>

          <ul class="checklist">
            <li>
              <span class="check-icon">‚úì</span> No late payments in the last 24
              months
            </li>
            <li>
              <span class="check-icon">‚úì</span> No bankruptcies or foreclosures
            </li>
            <li>
              <span class="check-icon">‚úì</span> No collections or charge-offs
            </li>
            <li>
              <span class="check-icon">‚úì</span> Diverse credit mix (mortgage,
              auto, credit cards)
            </li>
            <li>
              <span class="check-icon">‚úì</span> Low number of recent credit
              inquiries
            </li>
          </ul>
        </div>

        <div class="detailed-section">
          <h3>üìã Document Verification Status</h3>

          <div class="analysis-item">
            <span class="label">Bank Statements (3 months)</span>
            <span class="data" style="color: #16a34a">‚úì Verified</span>
          </div>
          <div class="analysis-item">
            <span class="label">Credit Report</span>
            <span class="data" style="color: #16a34a">‚úì Verified</span>
          </div>
          <div class="analysis-item">
            <span class="label">Employment Verification</span>
            <span class="data" style="color: #16a34a">‚úì Verified</span>
          </div>
          <div class="analysis-item">
            <span class="label">Tax Returns (2 years)</span>
            <span class="data" style="color: #16a34a">‚úì Verified</span>
          </div>
          <div class="analysis-item">
            <span class="label">Loan Application</span>
            <span class="data" style="color: #16a34a">‚úì Complete</span>
          </div>
          <div class="analysis-item">
            <span class="label">Identity Verification</span>
            <span class="data" style="color: #16a34a">‚úì Verified</span>
          </div>
        </div>

        <div class="detailed-section">
          <h3>üéØ Risk Factors Analysis</h3>

          <div class="chart-container">
            <div class="bar-chart">
              <div style="flex-direction: column; align-items: center">
                <div class="bar" style="height: 15%">
                  <span>15%</span>
                </div>
                <div class="bar-label">Default<br />Probability</div>
              </div>
              <div style="flex-direction: column; align-items: center">
                <div class="bar" style="height: 92%">
                  <span>92%</span>
                </div>
                <div class="bar-label">Credit<br />Score</div>
              </div>
              <div style="flex-direction: column; align-items: center">
                <div class="bar" style="height: 88%">
                  <span>88%</span>
                </div>
                <div class="bar-label">Income<br />Stability</div>
              </div>
              <div style="flex-direction: column; align-items: center">
                <div class="bar" style="height: 95%">
                  <span>95%</span>
                </div>
                <div class="bar-label">Asset<br />Adequacy</div>
              </div>
            </div>
          </div>

          <div class="analysis-item">
            <span class="label">Overall Risk Score:</span>
            <span class="data" style="color: #16a34a">8.7/10 (Low Risk)</span>
          </div>
        </div>

        <div class="detailed-section">
          <h3>üîç Key Findings</h3>

          <div
            style="
              padding: 15px;
              background: #dcfce7;
              border-radius: 8px;
              margin-bottom: 15px;
            "
          >
            <h4 style="color: #16a34a; margin-bottom: 10px">‚úì Strengths</h4>
            <ul style="margin-left: 20px; color: #15803d; line-height: 1.8">
              <li>
                Excellent credit score significantly above minimum requirements
              </li>
              <li>Strong, stable employment history with consistent income</li>
              <li>
                Low debt-to-income ratio provides ample room for loan payments
              </li>
              <li>Substantial liquid assets for down payment and reserves</li>
              <li>Perfect payment history with no derogatory marks</li>
              <li>All documentation complete and properly verified</li>
            </ul>
          </div>

          <div class="warning-box">
            <h4>‚ö† Considerations</h4>
            <ul style="margin-left: 20px; color: #92400e; line-height: 1.8">
              <li>No significant concerns identified</li>
              <li>Standard monitoring recommended for payment performance</li>
            </ul>
          </div>
        </div>

        <div class="detailed-section">
          <h3>üìä Loan Affordability Analysis</h3>

          <div class="analysis-item">
            <span class="label">Requested Loan Amount:</span>
            <span class="data">$400,000</span>
          </div>
          <div class="analysis-item">
            <span class="label">Estimated Monthly Payment:</span>
            <span class="data">$2,387</span>
          </div>
          <div class="analysis-item">
            <span class="label">Payment-to-Income Ratio:</span>
            <span class="data" style="color: #16a34a">22.9% (Excellent)</span>
          </div>
          <div class="analysis-item">
            <span class="label">Reserve Coverage:</span>
            <span class="data">35.6 Months</span>
          </div>
          <div class="analysis-item">
            <span class="label">Down Payment:</span>
            <span class="data">$80,000 (20%)</span>
          </div>
          <div class="analysis-item">
            <span class="label">LTV Ratio:</span>
            <span class="data">80%</span>
          </div>
        </div>

        <div class="recommendation-box">
          <h3>üéØ Final Recommendation: APPROVE</h3>
          <p>
            <strong
              >Based on comprehensive analysis of the applicant's financial
              profile, credit history, and documentation review, we recommend
              APPROVAL of this loan application.</strong
            >
          </p>
          <p style="margin-top: 15px">
            The applicant demonstrates exceptional creditworthiness with a
            credit score of 742, stable employment income of $125,000 annually,
            and a debt-to-income ratio of 28%. All required documentation has
            been verified and shows no discrepancies. The applicant has
            substantial liquid assets ($85,000) providing adequate reserves.
            With a low default probability and strong financial indicators
            across all metrics, this represents a low-risk lending opportunity.
          </p>
          <p style="margin-top: 15px">
            <strong>Recommended Terms:</strong> Standard rate, 30-year fixed
            mortgage at prevailing market rates. No additional collateral or
            co-signer required.
          </p>
        </div>

        <div style="margin-top: 30px; text-align: center">
          <button class="create-agent-btn" onclick="downloadReport()">
            üì• Download Full Report (PDF)
          </button>
          <button
            class="create-agent-btn"
            onclick="alert('Report sent to underwriting team!')"
            style="
              background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
              margin-left: 15px;
            "
          >
            üìß Send to Underwriter
          </button>
        </div>
      </div>
    </div>

    <script>
      let uploadedFiles = [];

      function switchTab(index) {
        const tabs = document.querySelectorAll(".tab");
        const contents = document.querySelectorAll(".tab-content");

        tabs.forEach((tab) => tab.classList.remove("active"));
        contents.forEach((content) => content.classList.remove("active"));

        tabs[index].classList.add("active");
        contents[index].classList.add("active");
      }

      // File upload handling
      const uploadArea = document.getElementById("uploadArea");
      const fileInput = document.getElementById("fileInput");

      if (uploadArea) {
        uploadArea.addEventListener("dragover", (e) => {
          e.preventDefault();
          uploadArea.classList.add("dragover");
        });

        uploadArea.addEventListener("dragleave", () => {
          uploadArea.classList.remove("dragover");
        });

        uploadArea.addEventListener("drop", (e) => {
          e.preventDefault();
          uploadArea.classList.remove("dragover");
          handleFiles(e.dataTransfer.files);
        });
      }

      if (fileInput) {
        fileInput.addEventListener("change", (e) => {
          handleFiles(e.target.files);
        });
      }

      function handleFiles(files) {
        for (let file of files) {
          uploadedFiles.push(file);
          addFileToList(file);
        }
      }

      function addFileToList(file) {
        const filesContainer = document.getElementById("uploadedFiles");
        const fileItem = document.createElement("div");
        fileItem.className = "file-item";
        fileItem.innerHTML = `
                <span>üìÑ ${file.name}</span>
                <button onclick="removeFile('${file.name}')">Remove</button>
            `;
        filesContainer.appendChild(fileItem);
      }

      function removeFile(fileName) {
        uploadedFiles = uploadedFiles.filter((f) => f.name !== fileName);
        updateFileList();
      }

      function updateFileList() {
        const filesContainer = document.getElementById("uploadedFiles");
        filesContainer.innerHTML = "";
        uploadedFiles.forEach((file) => addFileToList(file));
      }

      function createAgent() {
        const name = document.getElementById("agentName").value;
        const description = document.getElementById("agentDescription").value;

        if (!name || !description) {
          alert("Please fill in agent name and description");
          return;
        }

        alert(
          `Agent "${name}" created successfully!\n\nFiles uploaded: ${uploadedFiles.length}`
        );

        // Reset form
        document.getElementById("agentName").value = "";
        document.getElementById("agentDescription").value = "";
        uploadedFiles = [];
        updateFileList();

        switchTab(0);
      }

      function changeDocument() {
        const selector = document.getElementById("documentSelector");
        const viewer = document.getElementById("pdfViewer");

        // Using dummy PDFs for demonstration
        const docs = {
          bank: "https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf",
          credit:
            "https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf",
          application:
            "https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf",
        };

        viewer.src = docs[selector.value];
      }

      function generateReport() {
        const reportSection = document.getElementById("reportSection");
        reportSection.style.display = "none";

        // Show loading
        const loadingDiv = document.createElement("div");
        loadingDiv.className = "loading";
        loadingDiv.innerHTML =
          '<div class="spinner"></div><p>Analyzing documents and generating report...</p>';
        reportSection.parentNode.insertBefore(loadingDiv, reportSection);

        // Simulate processing
        setTimeout(() => {
          loadingDiv.remove();
          reportSection.classList.add("active");
          // Also switch to Report tab
          switchTab(3);
        }, 2000);
      }

      function downloadReport() {
        alert(
          "Downloading comprehensive underwriting report as PDF...\n\nReport: UW-2024-00127-Analysis.pdf"
        );
      }
    </script>
  </body>
</html>
